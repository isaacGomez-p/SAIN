<app-menu-principal></app-menu-principal>
<br>
<br>

<div class="grid">
    <div class="col-1 md:col-1 lg:col-1"></div>
    <div class="col-10 md:col-10 lg:col-10">
        <mat-card style="width: 100%;">
            <div class="flex align-items-center">
                <label>Estados: &nbsp; &nbsp; &nbsp;</label>
                <p-chip label="Todos" icon="pi pi-list" styleClass="mr-2" (click)="filtroPorEstados(1)" class="estado"></p-chip>
                <p-chip label="{{label1}}" icon="pi pi-list" styleClass="mr-2" (click)="filtroPorEstados(2)" class="estado"></p-chip>
                <p-chip label="{{label2}}" icon="pi pi-clock" styleClass="mr-2" (click)="filtroPorEstados(3)" class="estado"></p-chip>
                <p-chip label="{{label3}}" icon="pi pi-flag" styleClass="mr-2" (click)="filtroPorEstados(4)" class="estado"></p-chip>
                <p-chip label="{{label4}}" icon="pi pi-check"  styleClass="mr-2" (click)="filtroPorEstados(5)" class="estado"></p-chip>
                <p-chip label="{{label5}}" icon="pi pi-check"  styleClass="mr-2" (click)="filtroPorEstados(6)" class="estado"></p-chip>
            </div>
            <!--<p-chart type="doughnut" [data]="data1" [options]="chartOptions" [style]="{'width': '40%'}"></p-chart>x`
            <p-timeline [value]="events" layout="horizontal">
                <ng-template pTemplate="content" let-event>
                    {{event.status}}
                </ng-template>
            </p-timeline>-->
        </mat-card>
        
    </div>
</div>

<br>

<div class="grid">
    <div class="col-1 md:col-1 lg:col-1"></div>
    <div class="col-10 md:col-10 lg:col-10">
        <p-table #dt [value]="hojasDeVida" responsiveLayout="scroll"  [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10,25,50]"
        [globalFilterFields]="['numberId','costCenter','name','recommendation','verified']">

            <ng-template pTemplate="caption">
                <div class="table-header">
                    <div class="grid">
                        <div class="col-10 md:col-10 lg:col-9 letraMediana">
                            Personas registradas - {{mostrando}}
                        </div>
                        <div class="col-10 md:col-10 lg:col-3" style="align: right;">
                            <span class="p-button-icon-left">
                                <i class="pi pi-search"></i>
                                <button mat-button color="primary"  (click)="changeFilterStatus()">{{showFilterText}}</button>                                
                            </span>
                        </div>
                    </div>                                        
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="numberId">Identificador<p-sortIcon field="numberId"></p-sortIcon></th>
                    <th pSortableColumn="costCenter">Centro de Costo<p-sortIcon field="costCenter"></p-sortIcon></th>
                    <th pSortableColumn="bussUnit">Und. de Neg<p-sortIcon field="bussUnit"></p-sortIcon></th>
                    <th pSortableColumn="profile">Perfil<p-sortIcon field="profile"></p-sortIcon></th>
                    <th pSortableColumn="name">Nombre Postulante<p-sortIcon field="name"></p-sortIcon></th>                                        
                    <th pSortableColumn="verified">Verificado<p-sortIcon field="verified"></p-sortIcon></th>
                    <th pSortableColumn="verificationDate">Fecha Verificaci√≥n<p-sortIcon field="verificationDate"></p-sortIcon></th>
                    <th pSortableColumn="userAssign.name">Asignado a<p-sortIcon field="userAssign.name"></p-sortIcon></th>                    
                    <th >Obs.</th>                    
                    <th style="text-align-last: center;">Acciones</th>
                </tr>
                <tr *ngIf="showFilter">
                    <th>
                        <input pInputText type="text" (input)="dt.filter($any($event.target).value, 'numberId', 'startsWith')" placeholder="123456" class="p-column-filter anchoInputBusqueda">
                    </th>
                    <th>
                        <input pInputText type="text" (input)="dt.filter($any($event.target).value, 'costCenter', 'startsWith')" placeholder="" class="p-column-filter anchoInputBusqueda">
                    </th>
                    <th>
                        <input pInputText type="text" (input)="dt.filter($any($event.target).value, 'bussUnit', 'startsWith')" placeholder="" class="p-column-filter anchoInputBusqueda">
                    </th>
                    <th>
                        <input pInputText type="text" (input)="dt.filter($any($event.target).value, 'profile', 'startsWith')" placeholder="" class="p-column-filter anchoInputBusqueda">
                    </th>
                    <th>
                        <input pInputText type="text" (input)="dt.filter($any($event.target).value, 'name', 'startsWith')" placeholder={{nombre}} class="p-column-filter anchoInputBusqueda">
                    </th>
                    <th>
                        
                    </th>                    
                    <th>
                        <input pInputText type="text" (input)="dt.filter($any($event.target).value, 'verificationDate', 'startsWith')" placeholder="" class="p-column-filter anchoInputBusqueda">    
                    </th>
                    <th>
                        <input pInputText type="text" (input)="dt.filter($any($event.target).value, 'userAssign.name', 'startsWith')" placeholder="" class="p-column-filter anchoInputBusqueda">                
                    </th>
                    <th>
                        
                    </th>
                    <th>
                        
                    </th>              
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-h>
                <tr>
                    <td>{{h.numberId}}</td>
                    <td>{{h.costCenter}}</td>
                    <td>{{h.bussUnit}}</td>
                    <td>{{h.profile}}</td>
                    <td>{{h.name}}</td>   
                    <td *ngIf="h.verified" class="siLabel"> {{ h.verified }} / {{ totalQuestions }} </td>
                    <td *ngIf="!h.verified" class="noLabel"> 0/{{ totalQuestions }} </td>
                    <td *ngIf="h.userBy == null">{{h.creationDate | date:'short'}}</td>
                    <td *ngIf="h.userBy != null">{{h.verificationDate | date:'short'}}</td>
                    <td *ngIf="h.userAssign != null">{{h.userAssign.name}}</td>
                    <td *ngIf="h.userAssign == null">No ha sido asignado</td>
                    
                    <td>
                        <button mat-button color="primary" (click)="verObservacion(h)">Ver</button>
                    </td>
                    <td>
                        
                        <mat-button-toggle-group name="fontStyle" aria-label="Font Style" class="row">
                            <button *ngIf="h.verified && rol == 1" mat-button color="primary"  (click)="verHojaDeVida(h)">Ver</button>
                            <button *ngIf="rol == 3" mat-button color="primary"  (click)="verHojaDeVida(h)">Ver</button>
                            <button mat-button color="primary" (click)="asignar(h)" *ngIf="rol == 1">Asignar</button> 
                            <button mat-button color="primary" (click)="eliminarDialog(h)" *ngIf="rol == 1 || rol == 2">Eliminar</button> 
                        </mat-button-toggle-group>
                        
                    </td>   
                </tr>
            </ng-template>
        </p-table>
        <div class="col-10 md:col-10 lg:col-4 sm:col-3" id="right" *ngIf="rol === 2">
            <button mat-raised-button color="primary" (click)="agregar()" [disabled]="cargando" class="botonSiguiente"> <i class="fa-thin fa-plus"></i>Agregar</button>
        
        </div>
    </div>
</div>

