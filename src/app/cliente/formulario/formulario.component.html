<app-menu-principal></app-menu-principal>

<div class="grid">
    <div class="col-1 md:col-1 lg:col-1"></div>
    <div class="col-10 md:col-10 lg:col-10">
        <p-fieldset>
            <ng-template pTemplate="header">Hoja de Vida de : {{ nombre }}</ng-template>
            
                <p-table [value]="preguntas" responsiveLayout="scroll">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Criterio</th>
                            <th>Respuesta</th> 
                            <th *ngIf="adding > 0">Verificado</th>   
                            <th *ngIf="adding > 0">Fec. Verificaci√≥n</th>  
                            <th *ngIf="adding > 0">Verificado Por</th>   
                            <th *ngIf="adding > 0">Resultado</th>           
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-p>
                        <tr *ngIf="p.section == section">
                            <td>{{p.description}}</td>
                            <td>
                                <div *ngIf="p.type == 'text'">
                                    <textarea [rows]="p.height" pInputTextarea 
                                    [autoResize]=true 
                                    style="width: 100%;"
                                    
                                    [(ngModel)]="p.answer"                                    
                                    ></textarea>
                                </div>
                                <div *ngIf="p.type == 'number'" style="width: 100%;">
                                    <p-inputNumber  [(ngModel)]="p.answer" 
                                        class="centrarTextoInput"
                                        mode="decimal" 
                                        [minFractionDigits]="0" 
                                        [maxFractionDigits]="0"
                                        [useGrouping]="false"
                                    
                                        [maxlength]="10"  
                                        autocomplete="off" ></p-inputNumber>                           
                                </div>
                                <div *ngIf="p.type == 'moneda'" style="width: 100%;">
                                    <p-inputNumber  [(ngModel)]="p.answer" 
                                        class="centrarTextoInput"
                                        mode="currency" currency="COP" locale="es-CO"
                                        [minFractionDigits]="0" 
                                        [maxFractionDigits]="0"
                                    
                                        [maxlength]="12"  
                                        autocomplete="off" ></p-inputNumber>                           
                                </div>
                            </td>  
                            <td *ngIf="adding > 0"> 
                                <div class="field-checkbox">
                                    <p-checkbox [(ngModel)]="p.answerObjeto.verified" [disabled]="!habilitarEditar" [binary]="true" inputId="binary"></p-checkbox>
                                    <label for="binary" *ngIf="p.answerObjeto != undefined && p.answerObjeto.verified" class="siLabel"> Si </label>
                                    <label for="binary" *ngIf="p.answerObjeto == undefined || !p.answerObjeto.verified || p.answerObjeto == null" class="noLabel"> No </label>
                                </div>                  
                            </td>             
                            <td *ngIf="adding > 0">
                                <div>
                                    <label>{{p.date | date:'short'}}</label>
                                </div>
                            </td>     
                            <td *ngIf="adding > 0">
                                <div>
                                    <label>{{p.por}}</label>
                                </div>
                            </td>
                            <td *ngIf="adding > 0">
                                <div class="field-checkbox">
                                    <p-checkbox [(ngModel)]="p.answerObjeto.result" [binary]="true" [disabled]="!habilitarEditar" inputId="binary"></p-checkbox>
                                    <label for="binary" *ngIf="p.answerObjeto != undefined && p.answerObjeto.result"> Correcto </label>
                                    <label for="binary" *ngIf="p.answerObjeto == undefined || !p.answerObjeto.result"> Incorrecto </label>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
                
                <div class="col-12 md:col-12 lg:col-12"></div>
                <div class="col-1 md:col-6 lg:col-1"></div>
                <div class="col-10 md:col-10 lg:col-4 sm:col-3" id="left">
                    <button mat-stroked-button color="primary" (click)="anterior()" [disabled]="section==0 || cargando" class="botonSiguiente">Anterior</button>
                </div>
                <div class="col-1 md:col-1 lg:col-1 sm:col-2"></div>
                <div class="col-10 md:col-10 lg:col-4 sm:col-3" id="right" *ngIf="!registrar"  >
                    <button mat-raised-button color="primary" (click)="siguiente()" [disabled]="cargando" class="botonSiguiente">{{btnText}}</button>        
                </div>
                <div class="col-10 md:col-10 lg:col-4 sm:col-3" id="right" *ngIf="registrar" >
                    <button mat-raised-button color="primary" (click)="registrarPreguntas()" [disabled]="cargando" class="botonSiguiente">{{btnText}}</button>        
                </div>
        </p-fieldset>
    </div>
</div>
